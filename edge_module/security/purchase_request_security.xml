<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">

        <record id="purchase_request_manager_rule" model="ir.rule">
            <field name="name">Managers see all purchase requests</field>
            <field name="model_id" search="[('model', '=', 'purchase.request')]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('purchase.group_purchase_manager'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="True"/>
        </record>

        <record id="purchase_request_user_rule" model="ir.rule">
            <field name="name">Users see their own purchase requests and ones they need to approve</field>
            <field name="model_id" search="[('model', '=', 'purchase.request')]"/>
            <field name="domain_force">[
                '|', '|', '|', '|', '|',
                    ('requester_id', '=', user.id),
                    ('approver_level_1.user_id', '=', user.id),
                    ('approver_level_2.user_id', '=', user.id),
                    ('approver_level_3.user_id', '=', user.id),
                    ('approver_level_4.user_id', '=', user.id),
                    ('approver_level_5.user_id', '=', user.id)
            ]</field>
            <field name="groups" eval="[(4, ref('purchase.group_purchase_user'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="True"/>
        </record>

        <record id="purchase_request_line_user_rule" model="ir.rule">
            <field name="name">Users see lines of their own purchase requests and ones they need to approve</field>
            <field name="model_id" search="[('model', '=', 'purchase.request.line')]"/>
            <field name="domain_force">[
                '|', '|', '|', '|', '|',
                    ('request_id.requester_id', '=', user.id),
                    ('request_id.approver_level_1.user_id', '=', user.id),
                    ('request_id.approver_level_2.user_id', '=', user.id),
                    ('request_id.approver_level_3.user_id', '=', user.id),
                    ('request_id.approver_level_4.user_id', '=', user.id),
                    ('request_id.approver_level_5.user_id', '=', user.id)
            ]</field>
            <field name="groups" eval="[(4, ref('purchase.group_purchase_user'))]"/>
        </record>

        <record id="purchase_request_line_manager_rule" model="ir.rule">
            <field name="name">Managers see all purchase request lines</field>
            <field name="model_id" search="[('model', '=', 'purchase.request.line')]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('purchase.group_purchase_manager'))]"/>
        </record>

        <record id="purchase_request_portal_approver_rule" model="ir.rule">
            <field name="name">Portal Purchase Approver Access</field>
            <field name="model_id" search="[('model', '=', 'purchase.request')]"/>
            <field name="domain_force">[
                '|', '|', '|', '|', '|',
                    ('request_id.approver_level_1.user_id', '=', user.id),
                    ('request_id.approver_level_2.user_id', '=', user.id),
                    ('request_id.approver_level_3.user_id', '=', user.id),
                    ('request_id.approver_level_4.user_id', '=', user.id),
                    ('request_id.approver_level_5.user_id', '=', user.id)
            ]</field>
            <field name="groups" eval="[(4, ref('edge_module.group_portal_purchase_approver'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>
    </data>
</odoo>